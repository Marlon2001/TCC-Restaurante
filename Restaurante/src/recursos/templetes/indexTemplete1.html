<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Tamplete Restaurante</title>
    <!-- <link rel="stylesheet" href="./../../../../paginasEstaticas/restaurante/bootstrap/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- <script type="text/javascript"src="./../../../../paginasEstaticas/restaurante/bootstrap/js/bootstrap.min.js"></script> -->
    <style type="text/css">

        .bg-image-container1{
            background-size: 100% 100%;
            background-repeat: repeat;
        }

        .navbarColor{
            background-color: rgba(0, 0, 0, 0.8);
            z-index:100;
        }

        .bg-image-container2{
            width: 100%;
            height: 300px;
            
            background-image: url("https://img.freepik.com/fotos-gratis/textura-de-lousa-de-estilo-grunge_1048-10295.jpg?size=626&ext=jpg");
            background-size: 100% 100%;
            background-repeat: repeat;
        }

        /* Setas Carousel */
        .carousel-control-next-icon:after
        {
            content: '>';
            font-family: monospace, 'Courier New', Courier;
            font-size: 100px;
            color:rgb(80, 80, 80);
        }

        .carousel-control-prev-icon:after {
            content: '<';
            font-family: monospace, 'Courier New', Courier;
            font-size: 100px;
            color:rgb(80, 80, 80);
        }

        .bg-image-container3{
            background: url("https://voyage-onirique.com/wp-content/uploads/2018/04/WallpaperStudio10-86066.jpg");
            background-size: cover;
            background-position: center;
            background-repeat: repeat;
        }
    </style>
</head>



<body class="w-100 mx-auto">
    <!-- navbar -->
    <nav class="position-fixed navbar navbarColor justify-content-around w-100">
        <a class="navbar-brand" href="#">
            <img class="logo rounded float-left" style="max-width: 55px" alt="" />
        </a>
        <ul class="nav justify-content-end w-50">
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Menu</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Galeria</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Sobre o Restaurante</a>
            </li>
        </ul>
    </nav>
    <!-- container-inicial -->
    <div class="container-fluid p-0" style="min-height: 600px; max-height: 750px;">
        <img class="w-100" style="min-height: 600px; max-height: 750px;" src="../imgs/imagem.jpg" alt="" />
    </div>

    <!-- Container Sla -->
    <div class="container-fluid bg-image-container2">
        <h1 class="nomeRes pt-2 pb-2 text-center text-light">
            <!-- Nome Restaurante -->
        </h1>

        <div class="d-block">
            <p id="" class="sobreRes h5 text-center text-light">
                <!-- Descrição Restaurante   -->
            </p>
        </div>
    </div>

    <!-- Container Carousel -->
    <div class="container-fluid" style="min-height: 700px">
        <h1 class="text-center pt-2">MENU</h1>
        <div class="container w-25 mt-3 mb-0">
            <div class="d-flex justify-content-between" id="caixa_categorias">
                
            </div>
        </div>
        <hr>
        <!-- carousel -->

        <div class="carousel slide mt-5" id="ProdutosRestaurante" data-ride="carousel">

            <ol class="carousel-indicators">
                <li data-target="#ProdutosRestaurante" data-slide-to="0" class="active"></li>
                <li data-target="#ProdutosRestaurante" data-slide-to="1"></li>
                <li data-target="#ProdutosRestaurante" data-slide-to="2"></li>
            </ol>
            <div id="boxCarousel" class="carousel-inner">
               
                <!-- Item Carousel -->
            </div>
            <!-- SETAS -->
            <a class="carousel-control-prev" href="#ProdutosRestaurante" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#ProdutosRestaurante" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <!-- Container Mais Vendidos -->
    <div class="container-fluid bg-image-container3 p-0" style="min-height: 400px">
        <div class="container-fluid navbarColor p-5" style="min-height: inherit">
            <div id="boxMais" class="container w-50 mx-auto">
                <!-- Titulo -->
                <h1 class="text-center text-white">Mais Vendidos</h1>
                
            </div>
        </div>
    </div>

    <!-- Container sobre nós -->
    <div class="container-fluid" style="min-height: 300px">
        <h1 id="titleSobre" class="text-center p-3">Sobre Nós</h1>
        <p id="sobreGodinner" class="sobreRes text-center w-75 text-wrap mx-auto" style="max-height: 300rem">
            <!-- Sobre a Godinne -->
        </p>
        <div class="d-flex flex-row w-75 mx-auto mt-5 justify-content-around">
            <div class="d-flex flex-column">
                <p>
                    <span class="nomeRes">
                        <!-- Nome Empresa --></span> - <span id="cityRes">
                        <!-- Cidade --> </span>
                </p>
            </div>
            <div class="d-flex flex-column">
                Pagamento pelo App GoDinner: Visa , Elo, Amex,
            </div>
        </div>
    </div>

    <!-- Container Galeira -->
    <div class="container-fluid">
        <h1 class="text-center p-3">Galeria de fotos</h1>
        <div class="row">
            <div id="boxGaleria" class="col-md-12">

            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {

            const idRestaurante = 153;
            const DOMAIN = "http://godinner.tk:8080";
            const DOMAINFOTO = "http://fotos.godinner.tk";

            const TOKEN = "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJydWJ1cmd1ZXJAZ21haWwuY29tIiwiZXhwIjoxNTcyOTg1MDMzLCJpYXQiOjE1NzI5NjcwMzN9.rolC7GbWNNVQ3RooKvDaINR2hPg5nMe4TYUuxLxfFrWqNuscahR6tXzqjI3g_1l1yMDL3jLIBIXuRhVaUtFIuA"; 

            function buscarRestaurante() {

                let url = DOMAIN + `/templates/restaurantes/${idRestaurante}`;

                $.ajax({

                    url: url,
                    method: 'get',
                    headers:{ token: TOKEN},
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {

                        $(".sobreRes").text(resposta.sobre);
                        $(".nomeRes").text(resposta.restaurante.razaoSocial);
                        $("#cityRes").text(resposta.restaurante.endereco.cidade.cidade);
                        $(".logo").attr("src", DOMAINFOTO + "/" + resposta.foto);

                    }.bind(this),
                    error: function (data) {  

                        console.log(data)
                    }
                });
            }

            function produto(resposta){
                
                var rubens = [];
                
                for(let cont = 0; cont < 3; cont++){

                    rubens.push(resposta.shift());
                }
                
                return rubens
            }    

            function carousel(idCategoria, status){
                
                url = DOMAIN + `/categoriaproduto/restaurantes/${idRestaurante}/categorias/${idCategoria}`;
                
                $.ajax({
                    url: url,
                    method: 'get',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {
                        
                        let loop = resposta.length <= 3 ? resposta.length : 3;

                        $("#boxCarousel").append(`<div class="carousel-item ${status}">
                                                    <div class="d-flex justify-content-around p-3" id="categoria${idCategoria}">
                                
                                                    </div>
                                                </div>`);
                        // console.log(idCategoria);
                        
                        for(let cont = 0; cont <= loop; cont++){
                            
                            if(resposta[cont] == undefined)
                                continue;

                            let fotos = resposta[cont].foto;
                            
                            // console.log(idCategoria);

                            console.log(resposta[cont].descricao)

                            fotos.forEach(f => {
                                $(`#categoria${idCategoria}`).append(`
                                    <div class="card mb-2 float-left" style="width: 18rem;">
                                        <img class="card-img-top" src="${DOMAINFOTO + f.foto}" alt="Card image cap">
                                        <div class="card-body">
                                                <h5 class="card-title text-center">${resposta[cont].nome}</h5>
                                                <p class="card-text">${resposta[cont].descricao}</p>
                                        </div>
                                    </div>
                                `);
                            });
                        }

                    }.bind(this),
                    error: function (data) {

                        console.log(data)
                    }
                });
            }

            function maisVendidos(){

                // url = DOMAIN + `/templates/restaurantes/maisvendidos`;
                url = DOMAIN + `/produto`;

                $.ajax({
                    url: url,
                    method: 'get',
                    headers:{ token: TOKEN},
                    dataType: 'json',
                    contentType: 'application/json',
                    success:function(resposta) {

                        for(let i = 0; i < 5; i++){
                             
                            $("#boxMais").append(
                                $(`<div class="d-flex flex-row justify-content-between pt-3 mb-3" style="border-bottom: 3px solid white; border-bottom-style:dotted;">`)
                                    .append($(`<div class="d-flex flex-column text-white">`).append($(`<h3>`).text(resposta[i].nome)),
                                            $(`<div class="d-flex flex-column text-white">`).append($(`<h3>`).text(resposta[i].preco))
                                    ))
                        }
                    }.bind(this),
                    error: function (data) {

                        console.log(data);
                    }
                });
            }

            function buscarCategoriasRestaurante() {

                url = DOMAIN + `/categoriaproduto/categorias/${idRestaurante}`;

                $.ajax({

                    url: url,
                    method: 'get',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {

                        for (let i in resposta) {                       
                            $("#caixa_categorias").append(`<figure class="figure my-auto">
                                                                <img class="m-1" style="max-height: 64px" src="${DOMAINFOTO +resposta[i].foto}" alt="${resposta[i].nome}" />
                                                          </figure> `);

                            const status = i == 0 ? "active" : "";
                            carousel(resposta[i].id, status);
                        }
                    }.bind(this),
                    error: function (data) {

                        console.log(data)
                    }
                });
            }

            function buscarProdutosCategoria(idCategoria) {

                url = DOMAIN + `/categoriaproduto/restaurantes/${idRestaurante}/categorias/${idCategoria}`;''

                $.ajax({

                    url: url,
                    method: 'get',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {

                    }.bind(this),
                    error: function (data) {
                        console.log(data)
                    }
                });
            }

            function galeria(){

                url = DOMAIN + `/categoriaproduto/categorias/${idRestaurante}`;

                $.ajax({

                    url: url,
                    method: 'get',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {
                        
                        for(let i in resposta){



                            $("#boxGaleria").append($(`<figure class="col-md-4 float-left">`)
                                .append($(`<a href="" data-size="1600x1067">`).attr("href", resposta[i].id)
                                    .append($(`<img alt="${resposta[i].nome}" src="" class="img-fluid"/>`).attr("src", DOMAINFOTO + resposta[i].foto)
                                    )))
                                }
                    }.bind(this),
                    error: function (data) {

                        console.log(data)
                    }
                });
            }

            galeria();
            maisVendidos();
            buscarRestaurante();
            buscarCategoriasRestaurante();
        });
    </script>
</body>

</html>